<!doctype html>
<html lang="en">

<head>
    <title>password</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <style>
        body {
            font-family: "微軟正黑體";
            position: absolute;;
            left:300px;
            background-image:url("http://s3.amazonaws.com/caself/products/photos/000/001/209/original/stardust.png?1508122081");
            color:rgb(207, 226, 210);
        }
    </style>
</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <h3 style="margin-left:260px;margin-top: 30px">終極密碼</h3>
    <div class="row ml-5 mt-3" id="div">
        <button id="number" type="button" value="1" class="btn btn-dark ml-1">1</button>
        <button id="number" type="button" value="2" class="btn btn-dark ml-1">2</button>
        <button id="number" type="button" value="3" class="btn btn-dark ml-1">3</button>
        <button id="number" type="button" value="4" class="btn btn-dark ml-1">4</button>
        <button id="number" type="button" value="5" class="btn btn-dark ml-1">5</button>
        <button id="number" type="button" value="6" class="btn btn-dark ml-1">6</button>
        <button id="number" type="button" value="7" class="btn btn-dark ml-1">7</button>
        <button id="number" type="button" value="8" class="btn btn-dark ml-1">8</button>
        <button id="number" type="button" value="9" class="btn btn-dark ml-1">9</button>
        <button id="number" type="button" value="0" class="btn btn-dark ml-1">0</button>
        <button type="button" value="清除" id="clear" class="btn btn-danger ml-1">清除</button>
        <button type="button" value="猜" id="guess" class="btn btn-success ml-1">猜</button>
        <button type="button" id="start" class="btn btn-success ml-1">開始</button>
    </div>
    <hr style="position: relative;left: 30px;">
    <div style="margin-left:50px;">猜數次數 ： <span id="guesscount">0</span> 次<span id="guesslast" style="margin-left:320px;">剩餘次數 ： 5</span> 次</div>
    <div class="input-group mt-3" style="width:560px;margin-left:50px;">
        <span class="input-group-text" id="basic-addon1">Input</span>
        <input type="text" class="form-control" placeholder="輸入數字" id="num" aria-label="Recipient's username" aria-describedby="basic-addon2">
    </div>
    <b id="course" style="font-size:50px;margin-left:220px;"></b>
    <div id="count" style="font-size:40px;margin-left:100px;"></div>
    <script>

        /* var buttons = document.getElementsByTagName("button");
        for (var i = 0; i < buttons.length; i++) {
            var button = buttons[i];
            console.log(button);
            button.onclick = function () {
                var btn = event.srcElement;
                document.getElementById("num").value += btn.innerText;
            }
        } */

        /*  var $buttons = $("button");
         for (var i = 0; i < $buttons.length; i++) {
             var button = $buttons[i];
             console.log(button); */
        $("button#number").click(function () {

            $("#num").val($("#num").val() + this.innerText);

        });
        /*  } */

        /*  document.getElementById("clear").onclick = function () {
             document.getElementById("num").value = "";
         } */
        $("#clear").click(function () {
            $("#num").val("");
        })

        var random = '';
        var a = 0;
        var b = 5;
        /* document.getElementById("start").onclick = function () {
            random = Math.floor(Math.random() * 101);
            console.log(random);
        } */
        $("#start").click(function () {
            random = Math.floor(Math.random() * 101);
            console.log(random);
            $("#course").empty();
            a=0;
            b=5;
            $("#guesscount").empty();
            $("#guesslast").empty();
            $("#guesscount").append(a);
            $("#guesslast").append("剩餘次數 ： "+b);
        })

        var max = 100;
        var min = 1;
        /*  document.getElementById("guess").onclick = function () {
             var guessvalue = document.getElementById("num").value;
             if (guessvalue == random) {
                 document.getElementById("course").value = "\n" + "...猜對...";
                 console.log("恭喜猜對：答案為 " + guessvalue);
             }
             else {
                 if (guessvalue < random) {
                     min = document.getElementById("num").value;
                     document.getElementById("course").value = min + " ~ " + max;
                     console.log(min + " ~ " + max + " ---> " + guessvalue);
                 }
                 if (guessvalue > random) {
                     max = document.getElementById("num").value;
                     document.getElementById("course").value = min + " ~ " + max;
                     console.log(min + " ~ " + max + " ---> " + guessvalue);
                 }
             }
             document.getElementById("num").value = "";
         } */
        
        $("#guess").click(function () {
            $("#course").empty();
            a++;
            b--;
            $("#guesscount").empty();
            $("#guesslast").empty();
            $("#guesscount").append(a);
            $("#guesslast").append("剩餘次數 ： "+b);

            if (a < 5) {
                var guessvalue = $("#num").val();
                if (guessvalue == random) {
                    $("#course").append("\n" + "...猜對...");
                    console.log("恭喜猜對：答案為 " + guessvalue);
                }
                else {
                    if (guessvalue < random) {
                        $("#course").empty();
                        min = $("#num").val();
                        $("#course").append(min + " ~ " + max);
                        console.log(min + " ~ " + max + " ---> " + guessvalue);
                    }
                    if (guessvalue > random) {
                        $("#course").empty();
                        max = $("#num").val();
                        $("#course").append(min + " ~ " + max);
                        console.log(min + " ~ " + max + " ---> " + guessvalue);
                    }
                }
                $("#num").val("");
            }
            else if(a=5){
                $("#course").append("密碼 "+random);
                $("#count").append("<--- GAME OVER --->");
            }

        })

    </script>

</body>

</html>